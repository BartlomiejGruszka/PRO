@model PRO.ViewModels.GameFilterViewModel
@using PRO.Helpers
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div>
    <table border="0" cellpadding="0" cellspacing="0" width="100%" class="top-ranking-table">
        <tbody>
            <tr class="table-header"><td class="title">Tytuł</td><td class="score">Średnia ocena</td><td class="your-score">Twoja ocena</td><td class="status">Status</td></tr>
            @{
                var start = Model.Pagination.pageIteratorStart;
                var end = Model.Pagination.pageIteratorEnd;
                var games = Model.Games.ToList();
                for (var i = start; i <= end; i++)
                {
                    if (games.ElementAtOrDefault(i) != null)
                    {
                        var game = games[i];
                        <tr class="ranking-list">
                            <td class="title al va-t word-break">
                                @if (game.Image != null)
                                {
                                    <a class="hoverinfo_trigger fl-l ml12 mr8" href="/games/@game.Id" id="#area5114" rel="#info5114" style="position: relative;">
                                        <img width="50" height="70" class=" lazyloaded" border="0" src="@Url.Content(game.Image.ImagePath)">
                                    </a>
                                }


                                <div class="detail">
                                    <div class="di-flex clearfix">
                                        <a class="hoverinfo_trigger fl-l fs14 fw-b" href="/games/@game.Id" id="#area5114" rel="#info5114" style="position: relative;">@game.Title</a>
                                    </div>
                                    <div class="information di-ib mt4">
                                        @game.Description.Truncate(100)
                                    </div>
                                </div>
                            </td>

                            <td class="score ac fs14">
                                <div class="js-top-ranking-score-col di-ib al" style="width: 48.7969px;"><i class="icon-score-star mr4 on"></i><span class="text on score-label score-9">9.23</span></div>
                            </td>

                            <td class="your-score ac fs14">
                                <div class="js-top-ranking-your-score-col di-ib al" style="width: 43.4063px;">
                                    <a href="" class=""><i class="icon-score-star mr4 "></i><span class="text  score-label score-na">N/A</span></a>
                                </div>
                            </td>

                            <td class="status ac">
                                <a href="" class=" btn-addEdit-large btn-game-watch-status js-game-watch-status notinmylist"><i class="fa fa-plus-square-o mr4"></i>@game.Status.Name</a>
                            </td>
                        </tr>
                    }
                } }


        </tbody>

    </table>
</div>

<div>
    <ul class="pagination">
        @{
            var first = @Model.Pagination.firstPage;
            var current = @Model.Pagination.currentPage;
            var previous = @Model.Pagination.previousPage;
            var items = @Model.Pagination.itemsPerPage;
            var next = @Model.Pagination.nextPage;
            var last = @Model.Pagination.lastPage;
        }




        @{
            if (@current >= 3)
            {
                <li class="page-item">
                    <a class="page-link" href="/games?page=@first&items=@items">«</a>
                </li>
            }
            if (@current >= 2 && @previous != @current)
            {
                <li class="page-item">
                    <a class="page-link" href="/games?page=@previous&items=@items">@previous</a>
                </li>
            }

            <li class="page-item active">
                <a class="page-link" href="/games?page=@current&items=@items">@current</a>
            </li>

            if (@last > @current)
            {
                <li class="page-item">
                    <a class="page-link" href="/games?page=@next&items=@items">@next</a>
                </li>
            }

            if (@last > @current + 1)
            {
                <li class="page-item">
                    <a class="page-link" href="/games?page=@last&items=@items">&raquo;</a>
                </li>
            }
        }
    </ul>
</div>
